{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ø–∏—Å–æ–∫ —Ç—É—Ä–Ω–∏—Ä–æ–≤</title>
    <link rel="stylesheet" href="{% static 'tournaments/styles.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Teko:wght@600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—Ö–æ–¥–∞ -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>–í—Ö–æ–¥</h2>
            <form id="loginForm">
                <input type="email" placeholder="Email" required>
                <input type="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
                <button type="submit">–í–æ–π—Ç–∏</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
            <form id="registerForm">
                <input type="text" placeholder="–ò–º—è" required>
                <input type="email" placeholder="Email" required>
                <input type="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
                <input type="password" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            </form>
        </div>
    </div>

    <div class="header" role="banner">
        <div class="logo" role="heading" aria-level="1">
            <a href="{% url 'home' %}" class="logo-link">
                NO<span class="highlight-w">W</span>ACHAMPIONSHIP ü§º‚Äç‚ôÇÔ∏è
            </a>
        </div>
        <nav class="nav-menu" role="navigation" aria-label="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é">
            <a href="{% url 'tournament_list' %}" role="menuitem">–¢—É—Ä–Ω–∏—Ä—ã</a>
            
            <div class="dropdown">
                <a href="#" 
                   class="nav-link" 
                   role="button" 
                   aria-haspopup="true" 
                   aria-expanded="false"
                   aria-controls="sections-menu">
                    –°–µ–∫—Ü–∏–∏ ‚ñº
                </a>
                <div class="dropdown-content" 
                     id="sections-menu" 
                     role="menu" 
                     aria-label="–í—ã–±–æ—Ä —Å–µ–∫—Ü–∏–∏">
                    <a href="#" role="menuitem">–ú–∞–º–µ—Ç–æ–≤–∞</a>
                    <a href="#" role="menuitem">–ñ–∞–Ω—Å—É–≥—É—Ä–æ–≤–∞</a>
                </div>
            </div>
            
            <div class="dropdown">
                <a href="#" 
                   class="nav-link" 
                   role="button" 
                   aria-haspopup="true" 
                   aria-expanded="false"
                   aria-controls="about-menu">
                    –û –Ω–∞—Å ‚ñº
                </a>
                <div class="dropdown-content" 
                     id="about-menu" 
                     role="menu" 
                     aria-label="–û –Ω–∞—Å">
                    <a href="https://teamnova.kz/p/d9b54a/" role="menuitem"> –û–¥–µ–∂–¥–∞</a>        
                    <a href="#" role="menuitem">–ì–∞–ª–µ—Ä–µ—è</a>
                    <a href="https://teamnova.kz/?fbclid=PAZXh0bgNhZW0CMTEAAabqvuAdlphCRMiUAHZdep2UTLlLhtCTS6DYdvksrVo9BqU0Xt3qHUsoojE_aem_M8j27ck8Z9D-t-2EcmU9aQ#contacts" role="menuitem" target="_blank">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                </div>
            </div>

            <a href="#" class="signup" role="button">–í–æ–π—Ç–∏</a>
            <a href="#" class="signup" role="button">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</a>
        </nav>
    </div>

    <div class="tournaments-container">
        <h1>–¢—É—Ä–Ω–∏—Ä—ã</h1>
        
        <div class="filters">
            <a href="?status=upcoming" class="filter-btn">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ</a>
            <a href="?status=ongoing" class="filter-btn">–¢–µ–∫—É—â–∏–µ</a>
            <a href="?status=completed" class="filter-btn">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ</a>
        </div>

        <div class="tournaments-grid">
            {% for tournament in tournaments %}
            <div class="tournament-card">
                <h2>{{ tournament.title }}</h2>
                <div class="tournament-type">{{ tournament.get_tournament_type_display }}</div>
                <div class="tournament-dates">
                    <span>–ù–∞—á–∞–ª–æ: {{ tournament.start_date|date:"d.m.Y H:i" }}</span>
                    <span>–û–∫–æ–Ω—á–∞–Ω–∏–µ: {{ tournament.end_date|date:"d.m.Y H:i" }}</span>
                </div>
                <div class="tournament-location">{{ tournament.location }}</div>
                <div class="tournament-status {{ tournament.status }}">
                    {{ tournament.get_status_display }}
                </div>
                {% if tournament.is_registration_open %}
                <a href="#" class="register-btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                {% endif %}
            </div>
            {% empty %}
            <div class="no-tournaments">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤.</div>
            {% endfor %}
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const loginBtn = document.querySelectorAll('.signup')[0];
            const registerBtn = document.querySelectorAll('.signup')[1];
            const loginModal = document.getElementById('loginModal');
            const registerModal = document.getElementById('registerModal');
            const closeButtons = document.getElementsByClassName('close');

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            function openModal(modal) {
                modal.style.display = "block";
                modal.setAttribute('aria-hidden', 'false');
                modal.querySelector('input').focus();
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            function closeModal(modal) {
                modal.style.display = "none";
                modal.setAttribute('aria-hidden', 'true');
            }

            // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            loginBtn.onclick = function(e) {
                e.preventDefault();
                openModal(loginModal);
            }

            registerBtn.onclick = function(e) {
                e.preventDefault();
                openModal(registerModal);
            }

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            Array.from(closeButtons).forEach(button => {
                button.onclick = function() {
                    closeModal(loginModal);
                    closeModal(registerModal);
                }
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            window.onclick = function(event) {
                if (event.target == loginModal) {
                    closeModal(loginModal);
                }
                if (event.target == registerModal) {
                    closeModal(registerModal);
                }
            }

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∞–≤–∏—à–µ Esc
            window.onkeydown = function(event) {
                if (event.key === 'Escape') {
                    closeModal(loginModal);
                    closeModal(registerModal);
                }
            }
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º
        document.getElementById('loginForm').onsubmit = function(e) {
            e.preventDefault();
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –≤—Ö–æ–¥–∞
            console.log('–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Ö–æ–¥');
        }

        document.getElementById('registerForm').onsubmit = function(e) {
            e.preventDefault();
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            console.log('–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è');
        }
    </script>
</body>
</html> 